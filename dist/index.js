"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function getRandomString(a){for(var b="";b.length<a;)b+=Math.random().toString(36).substr(2,a-b.length);return s}function saveValue(a,b){if(window.localStorage)window.localStorage.setItem(a,b);else{var c=new Date;c.setTime(c.getTime()+31536e7);//10 years
var d="expires="+c.toUTCString();document.cookie="".concat(a,"=").concat(b,"; ").concat(d)}}function getValue(a){if(window.localStorage)return window.localStorage.getItem(a);var b;return(null===(b=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))||void 0===b?void 0:b.pop())||""}function getCreatedAnonymousId(){var a=getValue("ingrow_events_anonymous_id");return a||(a=getRandomString(32),saveValue("ingrow_events_anonymous_id",a)),a}function getDeviceInfo(){var a=navigator,b=a.userAgent,c=window,d=c.screen,e=d.width,f=d.height;return{userAgent:b,screen:{width:e,height:f}}}var Ingrow=/*#__PURE__*/function(){function a(b,c,d){_classCallCheck(this,a),this.apiKey=b,this.projectID=c,this.apiEndpoint="https://event.ingrow.co",this.anonymousId=getCreatedAnonymousId(),this.ip="autofill",this.setUserID(d)}return _createClass(a,[{key:"setUserID",value:function setUserID(a){this.userId=a||""}},{key:"sendEvent",value:function sendEvent(a,b){var c=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],d=[],e=function(a,b){d.push({name:a,input:b})};return e("session",{anonymous_id:this.anonymousId,user_id:userId}),e("ip",{ip:this.ip}),c&&e("device",getDeviceInfo()),fetch("".concat(this.apiEndpoint,"/v1"),{method:"POST",headers:{"api-key":this.apiKey},body:JSON.stringify({ingrow:{stream:a,project:this.projectID},enrichment:d,event:b})})}}]),a}();exports["default"]=Ingrow;